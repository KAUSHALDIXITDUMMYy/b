# Fliff Bot Docker Compose
# This file is auto-generated by the profile manager
# Run: docker-compose up -d

version: '3.8'

services:
  # Main orchestrator (runs without browser, just API)
  fliff-orchestrator:
    build:
      context: ..
      dockerfile: docker/Dockerfile
    container_name: fliff-orchestrator
    ports:
      - "3001:3001"     # Main API
      - "6080:6080"     # noVNC web interface
      - "5900:5900"     # VNC direct
    volumes:
      - ../profiles:/app/profiles
      - ../backend/data:/app/backend/data
    environment:
      - NODE_ENV=production
      - DISPLAY=:1
    restart: unless-stopped
    networks:
      - fliff-network

# Additional profile containers will be added dynamically
# Example:
#   profile-john-account1:
#     build:
#       context: ..
#       dockerfile: docker/Dockerfile.profile
#     container_name: profile-john-account1
#     ports:
#       - "6081:6080"   # noVNC
#       - "5901:5900"   # VNC
#     volumes:
#       - ../profiles/john-account1:/app/profile
#     environment:
#       - PROFILE_NAME=john-account1
#     networks:
#       - fliff-network

networks:
  fliff-network:
    driver: bridge



